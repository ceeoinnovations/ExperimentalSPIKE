<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pyscript Demo 7</title>
    <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
    <link rel="stylesheet" href="./style7.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/daisyui@2.6.0/dist/full.css"
      rel="stylesheet"
      type="text/css"
    />
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/tuftsceeo/SPIKE-Web-Interface/cdn/ServiceDock.js" charset="utf-8"></script>
    <py-env>
        - numpy
        - matplotlib
        - scikit-learn
        - asyncio
    </py-env>
</head>

<body>
    <div class="">
        <div id="navbar" class="navbar bg-gray-600 text-white">
            <div class="flex-1">
              <a class="btn btn-ghost normal-case text-xl">ServiceDock REPL</a>
            </div>
            <div class="flex-none">
              <ul class="menu menu-horizontal p-0">
                <li class="hover:gray-700 click:gray-800"><a>Settings</a></li>
                <li class="hover:gray-700 click:gray-800"><a>Demos Home</a></li>
                <li>
                    <div id="spike" class="-mt-4 hover:bg-gray-600"> 
                        <service-spike id="service_spike"></service-spike>
                    </div>
                </li>
              </ul>
            </div>
          </div>
        <p class="ml-12 my-4">Run ServiceDock code directly using the PyScript REPL environment! *Don't forget to connect to ServiceDock before running any ServiceDock specific code!</p>
        <div id="libraries-list" class="ml-12 my-4 relative">
            <h4 >Avaliable Libraries </h4>
            <ul class="inline-block">
                <li> - numpy</li>
                <li> - matplotlib</li>
                <li> - asyncio</li>
                <li> - scikit-learn</li>
            </ul>
            <div id="service-div" class="absolute top-0 right-0 mr-12">
                
                <button class="border rounded-xl border-blue-400 bg-blue-400 text-white my-4 mr-6 p-2">
                    Clear Console Outputs
                </button>
            </div>
        </div>
        <br>

        <div class="wrapper-grid">
        </div>

        

        <div id="repl-spike">

        </div>

        <br><br>

    </div>

    <py-script>
        from pyodide import create_proxy
        import asyncio

        serviceSPIKE = document.getElementById("service_spike").getService()

    </py-script>

    <script>
        let serviceSPIKE = document.getElementById("service_spike").getService();

        const wait = ms => new Promise(res => setTimeout(res, ms))

        serviceSPIKE.executeAfterInit(async function() {
            let repl = document.createElement("py-repl");
            repl.setAttribute("auto-generate", "true")
            repl.setAttribute("class", "my-4")
            document.getElementById("repl-spike").appendChild(repl)


        })
    </script>

    

</body>